{% extends "base.html" %}

{% load course %}

{% block title %}
    –¢–µ–º–∞ {{ module.order|add:1 }}: {{ module.title }}
{% endblock %}

{% block content %}
{% with course=module.course %}
    <h2>–ö—É—Ä—Å "{{ course.title }}"</h2>
    <div class="row">
        <div class="col-3"></div>
        <h3>–¢–µ–º–∏</h3>
        <ul>
            {% for m in course.modules.all %}
                <li data-id="{{ m.id }}" {% if m == module %} class="selected" {% endif %}>
                    <a href="{% url 'module_content_list' m.id %}">
                        <span>–¢–µ–º–∞ {{ m.order|add:1 }}</span>
                    </a>
                </li>
            {% empty %}
                <li>–¢–µ–º–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ</li>
            {% endfor %}
        </ul>
            <p><a href="{% url 'course_module_update' course.id %}">–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º–∏</a></p>
        </div>
    <div class="col-9">
        <h3>–¢–µ–º–∞ {{ module.order:add:1 }}. {{ module.title }}</h3>
        <hr>
        {% for content in module.contents.all %}
            <div class="data-id">{{ content.id }}
                {% with item=content.item %}
                    <p>{{ item }} ({{ item|model_name|capfirst }})</p>
                    <a href="{% url "module_content_update" module_id item|model_name item.id %}">üìù</a>
                    <form action="{% url "module_content_delete" content.id %}" method='post'>
                        {% csrf_token %}
                        <input type="submit" value="‚ùå">
                    </form>
                {% endwith %}
            </div>
        {% empty %}
            <p>
                –ö–æ–Ω—Ç–µ–Ω—Ç –≤—ñ–¥—Å—É—Ç–Ω—ñ–π
            </p>
        {% endfor %}
        <h4>–î–æ–¥–∞—Ç–∏:</h4>
        {% with content_type=['text', 'file', 'image', 'url', 'video'] %}
            <ul>
                {% for item in content_types %}
                    <li>
                        <a href="{% url "module_content_create" module.id content %}">{{ itme|capfirst }}</a>    
                    </li>
                {% endfor %}
            </ul>
        {% endwith %}
    </div>
{% endwith %}
{% endblock content %}